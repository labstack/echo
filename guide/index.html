<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    
    
    <link rel="shortcut icon" href="../img/favicon.ico">

    <title>Guide - Echo, a fast and unfancy micro web framework for Golang.</title>

    <link href="../css/bootstrap-custom.min.css" rel="stylesheet">
    <link href="../css/font-awesome-4.0.3.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.6/styles/tomorrow-night.min.css">
    <link href="../css/base.css" rel="stylesheet">
    <link href="../css/echo.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->

    
    <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-51208124-3', 'auto');
            ga('send', 'pageview');
        </script>
    
</head>

<body>

<div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <!-- Main title -->
            <a class="navbar-brand" href="..">Echo</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            <!-- Main navigation -->
            <ul class="nav navbar-nav">
            
            
                <li >
                    <a href="..">Home</a>
                </li>
            
            
            
                <li class="active">
                    <a href="./">Guide</a>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Recipes <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../recipes/file-upload/">File Upload</a>
                        </li>
                    
                        <li >
                            <a href="../recipes/streaming-file-upload/">Streaming File Upload</a>
                        </li>
                    
                        <li >
                            <a href="../recipes/streaming-response/">Streaming Response</a>
                        </li>
                    
                        <li >
                            <a href="../recipes/websocket/">WebSocket</a>
                        </li>
                    
                        <li >
                            <a href="../recipes/subdomains/">Subdomains</a>
                        </li>
                    
                        <li >
                            <a href="../recipes/graceful-shutdown/">Graceful Shutdown</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            </ul>

            <!-- Search, Navigation and Repo links -->
            <ul class="nav navbar-nav navbar-right">
                <li >
                    <a rel="next" href="..">
                        <i class="fa fa-arrow-left"></i> Previous
                    </a>
                </li>
                <li >
                    <a rel="prev" href="../recipes/file-upload/">
                        Next <i class="fa fa-arrow-right"></i>
                    </a>
                </li>
                
                <li>
                    <a href="https://github.com/labstack/echo">
                        
                            <i class="fa fa-github"></i>
                        
                        GitHub
                    </a>
                </li>
                
            </ul>
        </div>
    </div>
</div>

<div class="container">
    <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#guide">Guide</a></li>
        
            <li><a href="#installation">Installation</a></li>
        
            <li><a href="#customization">Customization</a></li>
        
            <li><a href="#routing">Routing</a></li>
        
            <li><a href="#middleware">Middleware</a></li>
        
            <li><a href="#response">Response</a></li>
        
            <li><a href="#error-handling">Error Handling</a></li>
        
            <li><a href="#deployment">Deployment</a></li>
        
    
    </ul>
</div></div>
    <div class="col-md-9" role="main">

<h1 id="guide">Guide</h1>
<!---
    Some info about guide
-->

<hr />
<h2 id="installation">Installation</h2>
<p>Echo has been developed and tested using Go <code>1.4.x</code></p>
<p>Install the latest version of Echo via <code>go get</code></p>
<pre><code class="sh">$ go get github.com/labstack/echo
</code></pre>

<p>To upgrade</p>
<pre><code class="sh">$ go get -u github.com/labstack/echo
</code></pre>

<p>Echo follows <a href="http://semver.org">semantic versioning</a> managed through GitHub releases.
Specific version of Echo can be installed using any <a href="https://github.com/avelino/awesome-go#package-management">package manager</a>.</p>
<h2 id="customization">Customization</h2>
<h3 id="http-error-handler">HTTP error handler</h3>
<p><code>Echo.SetHTTPErrorHandler(h HTTPErrorHandler)</code></p>
<p>Registers a custom <code>Echo.HTTPErrorHandler</code>.</p>
<p>Default handler rules</p>
<ul>
<li>If error is of type <code>Echo.HTTPError</code> it sends HTTP response with status code <code>HTTPError.Code</code>
and message <code>HTTPError.Message</code>.</li>
<li>Else it sends <code>500 - Internal Server Error</code>.</li>
<li>If debug mode is enabled, it uses <code>error.Error()</code> as status message.</li>
</ul>
<h3 id="debug">Debug</h3>
<p><code>Echo.SetDebug(on bool)</code></p>
<p>Enables debug mode.</p>
<h2 id="routing">Routing</h2>
<p>Echo's router is <a href="https://github.com/labstack/echo#benchmark">fast, optimized</a> and
flexible. It's based on <a href="http://en.wikipedia.org/wiki/Radix_tree">radix tree</a>
data structure which makes routing lookup really fast. It leverages
<a href="https://golang.org/pkg/sync/#Pool">sync pool</a> to reuse memory and achieve
zero dynamic memory allocation with no GC overhead.</p>
<p>Routes can be registered by specifying HTTP method, path and a handler. For example,
code below registers a route for method <code>GET</code>, path <code>/hello</code> and a handler which sends
<code>Hello!</code> HTTP response.</p>
<pre><code class="go">echo.Get(&quot;/hello&quot;, func(c *echo.Context) error {
    return c.String(http.StatusOK, &quot;Hello!&quot;)
})
</code></pre>

<p>Echo's default handler is <code>func(*echo.Context) error</code> where <code>echo.Context</code>
primarily holds HTTP request and response objects. Echo also has a support for other
types of handlers.</p>
<h3 id="path-parameter">Path parameter</h3>
<p>Request path parameters can be extracted either by name <code>Echo.Context.Param(name string) string</code>
or by index <code>Echo.Context.P(i int) string</code>. Getting parameter by index gives a
slightly better performance.</p>
<pre><code class="go">echo.Get(&quot;/users/:id&quot;, func(c *echo.Context) error {
    // By name
    id := c.Param(&quot;id&quot;)

    // By index
    id := c.P(0)

    return c.String(http.StatusOK, id)
})
</code></pre>

<h3 id="match-any">Match-any</h3>
<p>Matches zero or more characters in the path. For example, pattern <code>/users/*</code> will
match</p>
<ul>
<li><code>/users/</code></li>
<li><code>/users/1</code></li>
<li><code>/users/1/files/1</code></li>
<li><code>/users/anything...</code></li>
</ul>
<h3 id="path-matching-order">Path matching order</h3>
<ul>
<li>Static</li>
<li>Param</li>
<li>Match any</li>
</ul>
<h4 id="example">Example</h4>
<pre><code class="go">e.Get(&quot;/users/:id&quot;, func(c *echo.Context) error {
    return c.String(http.StatusOK, &quot;/users/:id&quot;)
})

e.Get(&quot;/users/new&quot;, func(c *echo.Context) error {
    return c.String(http.StatusOK, &quot;/users/new&quot;)
})

e.Get(&quot;/users/1/files/*&quot;, func(c *echo.Context) error {
    return c.String(http.StatusOK, &quot;/users/1/files/*&quot;)
})
</code></pre>

<p>Above routes would resolve in order</p>
<ul>
<li><code>/users/new</code></li>
<li><code>/users/:id</code></li>
<li><code>/users/1/files/*</code></li>
</ul>
<p>Routes can be written in any order.</p>
<h3 id="group">Group</h3>
<p><code>Echo.Group(prefix string, m ...Middleware) *Group</code></p>
<p>Routes with common prefix can be grouped to define a new sub-router with optional
middleware. If middleware is passed to the function, it overrides parent middleware
- helpful if you want a completely new middleware stack for the group. To add middleware
later you can use <code>Group.Use(m ...Middleware)</code>. Groups can also be nested.</p>
<p>In the code below, we create an admin group which requires basic HTTP authentication
for routes <code>/admin/*</code>.</p>
<pre><code class="go">echo.Group(&quot;/admin&quot;)
e.Use(mw.BasicAuth(func(usr, pwd string) bool {
    if usr == &quot;joe&quot; &amp;&amp; pwd == &quot;secret&quot; {
        return true
    }
    return false
}))
</code></pre>

<h3 id="uri-building">URI building</h3>
<p><code>Echo.URI</code> can be used generate URI for any handler with specified path parameters.
It's helpful to centralize all your URI patterns which ease in refactoring your
application.</p>
<p><code>echo.URI(h, 1)</code> will generate <code>/users/1</code> for the route registered below</p>
<pre><code class="go">// Handler
h := func(*echo.Context) error {
    return c.String(http.StatusOK, &quot;OK&quot;)
}

// Route
e.Get(&quot;/users/:id&quot;, h)
</code></pre>

<h2 id="middleware">Middleware</h2>
<p>Middleware is function which is chained in the HTTP request-response cycle. Middleware
has access to the request and response objects which it utilizes to perform a specific
action for example, logging every request. Echo supports variety of <a href="../#features">middleware</a>.</p>
<h3 id="logger">Logger</h3>
<p>Logs each HTTP request with method, path, status, response time and bytes served.</p>
<p><em>Example</em></p>
<pre><code class="go">e.Use(Logger())

// Output: `2015/06/07 18:16:16 GET / 200 13.238Âµs 14`
</code></pre>

<h3 id="basicauth">BasicAuth</h3>
<p>BasicAuth middleware provides an HTTP basic authentication.</p>
<ul>
<li>For valid credentials it calls the next handler in the chain.</li>
<li>For invalid Authorization header it sends "404 - Bad Request" response.</li>
<li>For invalid credentials, it sends "401 - Unauthorized" response.</li>
</ul>
<p><em>Example</em></p>
<pre><code class="go">echo.Group(&quot;/admin&quot;)
e.Use(mw.BasicAuth(func(usr, pwd string) bool {
    if usr == &quot;joe&quot; &amp;&amp; pwd == &quot;secret&quot; {
        return true
    }
    return false
}))
</code></pre>

<h3 id="gzip">Gzip</h3>
<p>Gzip middleware compresses HTTP response using gzip compression scheme.</p>
<p><em>Example</em></p>
<pre><code class="go">e.Use(mw.Gzip())
</code></pre>

<h3 id="recover">Recover</h3>
<p>Recover middleware recovers from panics anywhere in the chain and handles the control
to the centralized <a href="#error-handling">HTTPErrorHandler</a>.</p>
<p><em>Example</em></p>
<pre><code class="go">e.Use(mw.Recover())
</code></pre>

<h3 id="striptrailingslash">StripTrailingSlash</h3>
<p>StripTrailingSlash middleware removes the trailing slash from request path.</p>
<p><em>Example</em></p>
<pre><code class="go">e.Use(mw.StripTrailingSlash())
</code></pre>

<h3 id="redirecttoslash">RedirectToSlash</h3>
<p>RedirectToSlash middleware redirects requests without trailing slash path to trailing
slash path.</p>
<p><em>Options</em></p>
<pre><code class="go">RedirectToSlashOptions struct {
    Code int
}
</code></pre>

<p><em>Example</em></p>
<pre><code class="go">e.Use(mw.RedirectToSlash())
</code></pre>

<blockquote>
<p>StripTrailingSlash and RedirectToSlash middleware should not be used together.</p>
</blockquote>
<p><a href="https://github.com/labstack/echo/tree/master/examples/middleware">Examples</a></p>
<h2 id="response">Response</h2>
<h3 id="json">JSON</h3>
<pre><code class="go">context.JSON(code int, v interface{}) error
</code></pre>

<p>Sends a JSON HTTP response with status code.</p>
<h3 id="string">String</h3>
<pre><code class="go">context.String(code int, s string) error
</code></pre>

<p>Sends a text/plain HTTP response with status code.</p>
<h3 id="html">HTML</h3>
<pre><code class="go">func (c *Context) HTML(code int, html string) error
</code></pre>

<p>Sends an HTML HTTP response with status code.</p>
<h3 id="static-files">Static files</h3>
<p><code>Echo.Static(path, root string)</code> serves static files. For example, code below serves
files from directory <code>public/scripts</code> for any request path starting with <code>/scripts/</code>.</p>
<pre><code class="go">e.Static(&quot;/scripts/&quot;, &quot;public/scripts&quot;)
</code></pre>

<h3 id="serving-a-file">Serving a file</h3>
<p><code>Echo.ServeFile(path, file string)</code> serves a file. For example, code below serves
file <code>welcome.html</code> for request path <code>/welcome</code>.</p>
<pre><code class="go">e.ServeFile(&quot;/welcome&quot;, &quot;welcome.html&quot;)
</code></pre>

<h3 id="serving-an-index-file">Serving an index file</h3>
<p><code>Echo.Index(file string)</code> serves root index page - <code>GET /</code>. For example, code below
serves root index page from file <code>public/index.html</code>.</p>
<pre><code class="go">e.Index(&quot;public/index.html&quot;)
</code></pre>

<h3 id="serving-favicon">Serving favicon</h3>
<p><code>Echo.Favicon(file string)</code> serves default favicon - <code>GET /favicon.ico</code>. For example,
code below serves favicon from file <code>public/favicon.ico</code>.</p>
<pre><code class="go">e.Favicon(&quot;public/favicon.ico&quot;)
</code></pre>

<h2 id="error-handling">Error Handling</h2>
<p>Echo advocates centralized HTTP error handling by returning <code>error</code> from middleware
and handlers.</p>
<p>It allows you to</p>
<ul>
<li>Debug by writing stack trace to the HTTP response.</li>
<li>Customize HTTP responses.</li>
<li>Recover from panics inside middleware or handlers.</li>
</ul>
<p>For example, when basic auth middleware finds invalid credentials it returns
<code>401 - Unauthorized</code> error, aborting the current HTTP request.</p>
<pre><code class="go">package main

import (
    &quot;net/http&quot;

    &quot;github.com/labstack/echo&quot;
)

func main() {
    e := echo.New()
    e.Use(func(c *echo.Context) error {
        // Extract the credentials from HTTP request header and perform a security
        // check

        // For invalid credentials
        return echo.NewHTTPError(http.StatusUnauthorized)
    })
    e.Get(&quot;/welcome&quot;, welcome)
    e.Run(&quot;:1323&quot;)
}

func welcome(c *echo.Context) error {
    return c.String(http.StatusOK, &quot;Welcome!&quot;)
}
</code></pre>

<p>See how <a href="#customization">HTTPErrorHandler</a> handles it.</p>
<h2 id="deployment">Deployment</h2>
<p><em>WIP</em></p></div>
</div>

<footer class="col-md-12">
    <hr>
    <center class="social">
        <a href="https://github.com/labstack" target="_blank">
            <i class="fa fa-github fa-2x"></i>
        </a>
        <a href="https://twitter.com/labstack" target="_blank">
            <i class="fa fa-twitter fa-2x"></i>
        </a>
        <a href="https://www.facebook.com/labstack" target="_blank">
            <i class="fa fa-facebook fa-2x"></i>
        </a>
    </center>
    
    <center>&copy; 2015 LabStack</center>
    
</footer>

<script src="../js/jquery-1.10.2.min.js"></script>
<script src="../js/bootstrap-3.0.3.min.js"></script>
<script src="../js/highlight.pack.js"></script>
<script src="../js/base.js"></script>
</body>
</html>